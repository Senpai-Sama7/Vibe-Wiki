(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1463:(e,t,r)=>{"use strict";r.d(t,{bl:()=>n,dj:()=>i,mZ:()=>a});var s=r(2115);function i(){let[e,t]=(0,s.useState)([]),r=(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]);return{toasts:e,showToast:(0,s.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o="toast-".concat(Date.now(),"-").concat(Math.random()),n={id:o,message:e,type:s,duration:i};t(e=>[...e,n]),i>0&&setTimeout(()=>{r(o)},i)},[r]),hideToast:r,clearAll:(0,s.useCallback)(()=>{t([])},[])}}let o=null;function n(e){o=e}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;o?o(e,t,r):console.warn("Global toast handler not initialized")}},3673:()=>{},5584:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>x});var s=r(5155),i=r(2115),o=r(1463),n=r(4486),a=r(1408),c=r(2821);let l={success:"✓",error:"✕",info:"ℹ"},u={success:"bg-green-500 border-green-600",error:"bg-red-500 border-red-600",info:"bg-blue-500 border-blue-600"};function d(e){let{toast:t,onDismiss:r}=e;return(0,i.useEffect)(()=>{if(t.duration&&t.duration>0){let e=setTimeout(()=>{r(t.id)},t.duration);return()=>clearTimeout(e)}},[t.id,t.duration,r]),(0,s.jsx)(n.P.div,{initial:{opacity:0,x:100,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.95},transition:{duration:.3,ease:[.22,1,.36,1]},className:(0,c.A)("pointer-events-auto relative rounded-lg border-2 px-4 py-3 shadow-lg","min-w-[300px] max-w-[400px]",u[t.type]),role:"alert","aria-live":"polite","aria-atomic":"true",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-xl","aria-hidden":"true",children:l[t.type]}),(0,s.jsx)("p",{className:"flex-1 text-sm font-medium text-white",children:t.message}),(0,s.jsx)("button",{onClick:()=>r(t.id),className:"ml-2 text-white opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded","aria-label":"Dismiss notification",children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function h(e){let{toasts:t,onDismiss:r}=e;return(0,s.jsx)("div",{className:"pointer-events-none fixed right-4 top-4 z-50 flex flex-col gap-2","aria-live":"polite","aria-label":"Notifications",children:(0,s.jsx)(a.N,{mode:"popLayout",children:t.map(e=>(0,s.jsx)(d,{toast:e,onDismiss:r},e.id))})})}var g=r(1983),m=r(5849);class p{track(e,t){let r=this.createErrorReport(e,t);this.addToQueue(r),this.processQueue()}trackCustom(e){let t={message:e.message||"Unknown error",timestamp:e.timestamp||Date.now(),severity:e.severity||"medium",category:e.category||"unknown",stack:e.stack,userAgent:e.userAgent||this.getUserAgent(),url:e.url||this.getCurrentUrl(),componentStack:e.componentStack,metadata:e.metadata};this.addToQueue(t),this.processQueue()}createErrorReport(e,t){let r="string"==typeof e?e:e.message,s="string"==typeof e?void 0:e.stack;return{message:r,stack:s,timestamp:Date.now(),userAgent:this.getUserAgent(),url:this.getCurrentUrl(),severity:this.determineSeverity(r,s),category:this.categorizeError(r,s),metadata:t}}determineSeverity(e,t){let r=e.toLowerCase();return r.includes("critical")||r.includes("fatal")||r.includes("security")?"critical":r.includes("error")||r.includes("failed")||r.includes("exception")?"high":r.includes("warn")||r.includes("deprecated")?"medium":"low"}categorizeError(e,t){let r=e.toLowerCase(),s=(null==t?void 0:t.toLowerCase())||"";return r.includes("network")||r.includes("fetch")||r.includes("ajax")?"network":r.includes("syntax")||r.includes("parse")?"syntax":r.includes("component")||s.includes("react")?"component":r.includes("user")||r.includes("validation")?"user":"runtime"}addToQueue(e){let t=(0,m._)((0,g._)({},e),{id:this.generateId(),retryCount:0});this.queue.push(t),this.queue.length>this.maxQueueSize&&this.queue.shift(),this.saveQueue()}async processQueue(){if(!this.isProcessing&&0!==this.queue.length){this.isProcessing=!0;try{let e=this.queue.splice(0,10);await this.sendToService(e),this.saveQueue()}catch(e){console.error("[Error Tracker] Failed to process queue:",e)}finally{this.isProcessing=!1,this.queue.length>0&&setTimeout(()=>this.processQueue(),1e3)}}}async sendToService(e){}setupGlobalHandlers(){window.addEventListener("error",e=>{this.track(e.error||e.message,{filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{this.track(e.reason,{type:"unhandledRejection",promise:e.promise})}),window.addEventListener("react-error",e=>{this.trackCustom({message:e.detail.message,stack:e.detail.stack,componentStack:e.detail.componentStack,severity:"high",category:"component"})})}loadQueue(){try{let e=localStorage.getItem(this.storageKey);e&&(this.queue=JSON.parse(e))}catch(e){console.warn("[Error Tracker] Failed to load queue from storage")}}saveQueue(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(e){console.warn("[Error Tracker] Failed to save queue to storage")}}generateId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}getUserAgent(){return navigator.userAgent}getCurrentUrl(){return window.location.href}getQueue(){return[...this.queue]}clearQueue(){this.queue=[],this.saveQueue()}getStats(){let e={total:this.queue.length,bySeverity:{},byCategory:{}};return this.queue.forEach(t=>{e.bySeverity[t.severity]=(e.bySeverity[t.severity]||0)+1,e.byCategory[t.category]=(e.byCategory[t.category]||0)+1}),e}constructor(){this.queue=[],this.maxQueueSize=50,this.storageKey="vibeWiki.errorQueue",this.isProcessing=!1,this.loadQueue(),this.setupGlobalHandlers()}}let f=new p;class y extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var r,s,i;i={message:e.message,stack:e.stack,componentStack:t.componentStack||void 0,severity:"high",category:"component",metadata:{errorInfo:t}},f.trackCustom(i),null==(r=(s=this.props).onError)||r.call(s,e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,s.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"An unexpected error occurred. Please try refreshing the page."}),!1,(0,s.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,s.jsx)("button",{onClick:this.resetError,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Try Again"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Go Home"})]})]})})}):this.props.children}constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}function x(e){let{children:t}=e,{toasts:r,showToast:n,hideToast:a}=(0,o.dj)();return(0,i.useEffect)(()=>{(0,o.bl)(n)},[n]),(0,s.jsxs)(y,{children:[t,(0,s.jsx)(h,{toasts:r,onDismiss:a})]})}},5852:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3673,23)),Promise.resolve().then(r.bind(r,5584))}},e=>{e.O(0,[978,165,441,255,358],()=>e(e.s=5852)),_N_E=e.O()}]);